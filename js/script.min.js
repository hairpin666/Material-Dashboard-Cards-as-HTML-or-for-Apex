var materialCards=function(){"use strict";return{initialize:function(a,e,r,t,n){function c(){try{apex.util.showSpinner(i)}catch(e){var r=$("<span></span>");r.attr("id","loader"+a),r.addClass("ct-loader fa-stack fa-3x");var t=$("<i></i>");t.addClass("fa fa-circle fa-stack-2x"),t.css("color","rgba(121,121,121,0.6)");var n=$("<i></i>");n.addClass("fa fa-refresh fa-spin fa-inverse fa-stack-1x"),n.css("animation-duration","1.8s"),r.append(t),r.append(n),i.append(r)}}function l(){}function p(a){i.empty();var e=C(i),t=v(e);a.row&&a.row.length>0?h(t,a.row,s):(i.css("min-height",""),t.append('<div class="s-g-col-12">'+r+"</div>"))}function C(a){var e=$("<div></div>");return e.addClass("s-g-container"),a.append(e),e}function v(a){var e=$("<div></div>");return e.addClass("s-g-row"),a.append(e),e}function f(){if(e)c(),apex.server.plugin(e,{pageItems:n},{success:p,error:function(a){i.empty(),console.log(a.responseText),i.append("<span>Error occured please check console for more information</span>")},dataType:"json"});else try{c(),setTimeout(function(){p(dataJSON)},500)}catch(a){console.log("need data json"),console.log(a)}}function h(a,e,r){e&&e.length>0&&($.each(e,function(e,t){t.CARD_TYPE?"icon"===t.CARD_TYPE.toLowerCase()?A(e,a,t,r):g(e,a,t,r,t.CARD_CHART_CONFIG):console.log("Please select the a valid CARD_TYPE")}),l())}function A(a,e,r,t){var n="background: linear-gradient(60deg, hsl("+23*a%350+", 55%, 60%), hsl("+23*a%350+", 50%, 60%));box-shadow: 0 12px 20px -10px rgba(230, 230, 230, 0.28), 0 4px 20px 0px rgba(0, 0, 0, 0.12), 0 7px 8px -5px rgba(230, 230, 230, 0.2);",d=$("<div></div>");d.addClass("s-g-col-"+t.cardWidth);var s=$("<div></div>");s.addClass("at-card at-card-stats");var i=$("<div></div>");if(i.addClass("card-header"),r.CARD_ICON){var o=$("<i></i>");o.addClass("fa "+r.CARD_ICON);var c=void 0!=r.CARD_ICON_COLOR&&r.CARD_ICON_COLOR.length>0?r.CARD_ICON_COLOR:"white";o.attr("style","color:"+c),i.append(o)}i.attr("style",r.CARD_HEADER_STYLE||n),s.append(i);var l=$("<div></div>");l.addClass("card-content");var p=void 0!=r.CARD_TITLE?r.CARD_TITLE:"";l.append('<p class="category">'+p+"</p>");var C=void 0!=r.CARD_VALUE?r.CARD_VALUE:"";l.append('<h2 class="title">'+C+"</h2>"),s.append(l);var v=$("<div></div>");v.addClass("card-footer");var f=$("<div></div>");if(r.CARD_FOOTER&&(f=$("<div></div>"),f.addClass("stats"),f.append(r.CARD_FOOTER)),v.append(f),s.append(v),d.append(s),r.CARD_LINK){var h=$("<a></a>");h.attr("href",r.CARD_LINK),h.append(d),e.append(h)}else e.append(d)}function g(e,r,t,n,d){var s="background: linear-gradient(60deg, hsl("+23*e%350+", 55%, 60%), hsl("+23*e%350+", 50%, 60%));box-shadow: 0 12px 20px -10px rgba(230, 230, 230, 0.28), 0 4px 20px 0px rgba(0, 0, 0, 0.12), 0 7px 8px -5px rgba(230, 230, 230, 0.2);",i={fullWidth:!0,chartPadding:{bottom:-10,top:20,right:30,left:-5}},o={};if(d&&"string"==typeof d)try{o=JSON.parse(d)}catch(c){console.log("Error while try to parse CARD_CHART_CONFIG: "+c+d)}else o=d;$.extend(!0,i,o);var l="ct-chart-"+a+e,p=$("<div></div>");p.addClass("s-g-col-"+n.cardWidth);var C=$("<div></div>");C.addClass("at-card");var v=$("<div></div>");v.addClass("card-header card-chart"),v.attr("style",t.CARD_HEADER_STYLE||s);var f=$("<div></div>");f.addClass("ct-chart"),f.attr("id",l),v.append(f),C.append(v);var h=$("<div></div>");h.addClass("card-content");var A=void 0!=t.CARD_TITLE&&t.CARD_TITLE.length>0?t.CARD_TITLE:"";h.append('<p class="category">'+A+"</p>");var g=void 0!=t.CARD_VALUE&&t.CARD_VALUE.length>0?t.CARD_VALUE:"-";h.append('<h2 class="title">'+g+"</h2>"),C.append(h);var R=$("<div></div>");R.addClass("card-footer");var _=$("<div></div>");if(t.CARD_FOOTER&&(_=$("<div></div>"),_.addClass("stats"),_.append(t.CARD_FOOTER)),R.append(_),C.append(R),p.append(C),t.CARD_LINK){var D=$("<a></a>");D.attr("href",t.CARD_LINK),D.append(p),r.append(D)}else r.append(p);var u;if(t.CARD_CHART_DATA){var O={};if("string"==typeof t.CARD_CHART_DATA)try{O=JSON.parse(t.CARD_CHART_DATA)}catch(c){console.log("Error while try to parse CARD_CHART_DATA"),console.log(c),console.log(t.CARD_CHART_DATA)}else O=t.CARD_CHART_DATA;switch(t.CARD_TYPE.toLowerCase()){case"chart-line":u=new Chartist.Line("#"+l,O,i);break;case"chart-bar":u=new Chartist.Bar("#"+l,O,i);break;case"chart-pie":i.chartPadding={},u=new Chartist.Pie("#"+l,O,i);break;default:console.log("No valid Chart type")}var T=void 0!=t.CARD_ICON_COLOR&&t.CARD_ICON_COLOR.length>0?t.CARD_ICON_COLOR:"white";u.on("draw",function(a){("bar"===a.type||"line"===a.type||"point"===a.type)&&a.element.attr({style:"stroke:  "+T}),("slice"===a.type||"area"===a.type)&&a.element.attr({style:"fill: "+T+"; fill-opacity: "+(a.index%10+2)/10}),$(f).find(".ct-slice-pie").attr("stroke",T),$(f).find(".ct-label").css("color",T),$(f).find(".ct-grid").css("stroke",T),$(f).find(".ct-grid").css("opacity",".4")})}}var d={cardWidth:4,refresh:0},s={},i=$("#"+a);if(i.css("min-height","170px"),"string"==typeof t)try{s=JSON.parse(t)}catch(o){console.log("Error while try to parse udConfigJSON. Please check your Config JSON. Standard Config will be used."),console.log(o),console.log(t),s={}}else s=t;try{s=$.extend(!0,d,s)}catch(o){console.log("Error while try to merge udConfigJSON into Standard JSON if any attribute is missing. Please check your Config JSON. Standard Config will be used."),console.log(o),s=d,console.log(s)}f();try{apex.jQuery(i).bind("apexrefresh",function(){0==i.children("span").length&&f()})}catch(o){console.log("Apex is missing"),console.log(o)}s.refresh>0&&setInterval(function(){0==i.children("span").length&&f()},1e3*s.refresh)}}}();